<ytm-mobile-topbar-renderer id="header-bar" class="sticky-player">
  <header class="mobile-topbar-header cbox" data-mode="searching" aria-modal="true" role="dialog">
    <button class="mobile-topbar-back-arrow" aria-label="Đóng tìm kiếm">
      <c3-icon>
        <span class="yt-icon-shape yt-spec-icon-shape">
          <div style="width: 100%; height: 100%; display: block; fill: currentcolor;">
            <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24" focusable="false" aria-hidden="true" style="pointer-events: none; display: inherit; width: 100%; height: 100%;">
              <path d="M15.957 2.793a1 1 0 0 1 0 1.414L8.164 12l7.793 7.793a1 1 0 1 1-1.414 1.414L5.336 12l9.207-9.207a1 1 0 0 1 1.414 0z"></path>
            </svg>
          </div>
        </span>
      </c3-icon>
    </button>
    <yt-searchbox role="search" client-ve-type="10349" class="YtSearchboxComponentHost YtSearchboxComponentMweb">
      <div class="YtSearchboxComponentInputBox" style="border-radius:32px;padding: 0 44px 0 12px;">
      <form action="/results" class="YtSearchboxComponentSearchForm" onsubmit="event.preventDefault(); searchVideos();">
        <input name="search_query" type="text" autocomplete="off" autocorrect="off" class="YtSearchboxComponentInput yt-searchbox-input title font-saomaiHeading uppercase font-bold" 
          placeholder="Tìm kiếm" id="search" 
          value="" 
          onkeydown="if(event.key === 'Enter') { 
            event.preventDefault();
            const query = document.getElementById('search').value.trim();
            if (query) {
              searchVideos();
            } else {
              return;
            }
          }">
      </form>
      </div>
      <div class="YtSearchboxComponentVoiceSearchWrapper">
        <ytm-button-renderer class="icon-microphone_on">
          <button class="yt-spec-button-shape-next yt-spec-button-shape-next--text yt-spec-button-shape-next--mono yt-spec-button-shape-next--size-m yt-spec-button-shape-next--icon-only-default yt-spec-button-shape-next--enable-backdrop-filter-experiment" aria-label="Tìm kiếm bằng giọng nói" title="" style="">
            <div class="yt-spec-button-shape-next__icon" aria-hidden="true">
              <c3-icon>
                <span class="yt-icon-shape yt-spec-icon-shape">
                  <div style="width: 100%; height: 100%; display: block; fill: currentcolor;">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" focusable="false" aria-hidden="true" style="pointer-events: none; display: inherit; width: 100%; height: 100%;">
                      <g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15.5 7.5h4-4zm-11 0h2-2zm4 9h-4 4zm11 0h-2 2z"></path><path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M14.5 19.5a3 3 0 110-6 3 3 0 010 6zm-5-9a3 3 0 110-6 3 3 0 010 6z"></path></g>
                    </svg>
                  </div>
                </span>
              </c3-icon>
            </div>
          </button>
        </ytm-button-renderer>
      </div>
    </yt-searchbox>
  </header>
</ytm-mobile-topbar-renderer>
<script>
    $(document).ready(function() {
        $('#search').on('input', function() {
            $('.clear-button').remove();
            if ($(this).val().trim() !== '') {
                const clearButton = `
                    <button class="box-border tap-highlight-transparent bg-transparent border-0 rounded-full cursor-pointer absolute text-center no-underline text-normal touch-manipulation transition-duration-33 transition-all user-select-none vertical-align-middle  color-subdued min-inline-size-0 inline-flex items-center justify-center right-3 color-black top-1-2 -translate-y-1-2 overflow-wrap-anywhere clear-button" style="-webkit-transform: translateY(-50%);transform: translateY(-50%);"
                            data-testid="search-input-clear-button" 
                            aria-label="Clear search field" 
                            data-encore-id="buttonTertiary">
                        <span aria-hidden="true" class="flex">
                            <svg data-encore-id="icon" role="img" aria-hidden="true" viewBox="0 0 16 16" class="w-5 h-5 fill-current">
                                <path d="M2.47 2.47a.75.75 0 0 1 1.06 0L8 6.94l4.47-4.47a.75.75 0 1 1 1.06 1.06L9.06 8l4.47 4.47a.75.75 0 1 1-1.06 1.06L8 9.06l-4.47 4.47a.75.75 0 0 1-1.06-1.06L6.94 8 2.47 3.53a.75.75 0 0 1 0-1.06Z"></path>
                            </svg>
                        </span>
                    </button>
                `;
                $(this).after(clearButton);
            }
        });

        $(document).on('click', '.clear-button', function() {
            $('#search').val('');
            $(this).remove();
        });
    });
</script>
